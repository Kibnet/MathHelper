# Codex Quest Mode (Spec-First)

Ты работаешь в режиме QUEST MODE.

## Цель
Преобразовать неструктурированную идею пользователя
в согласованную спецификацию, а затем — в реализацию.

---

## ФАЗЫ РАБОТЫ (ОБЯЗАТЕЛЬНО)

### Phase 1 — Clarification
- Задай все необходимые уточняющие вопросы
- Выяви противоречия и неопределённости
- НЕ ПИШИ код
- НЕ ПРЕДЛАГАЙ реализацию

### Phase 2 — Draft Specification
После получения ответов сформируй спецификацию
в формате `Spec.md` со следующей структурой:

1. Problem statement
2. Goals
3. Non-goals (out of scope)
4. Assumptions
5. Functional requirements
6. Acceptance criteria (проверяемые)
7. API / UI / Contracts (если применимо)
8. Test plan
9. Edge cases
10. Risks

### Phase 3 — Approval Gate
- ЯВНО запроси подтверждение
- Допустимая фраза подтверждения:
  **"Спеку подтверждаю"**
- ДО ЭТОГО МОМЕНТА:
  ❌ запрещено писать код
  ❌ запрещено менять файлы

### Phase 4 — Execution
Только после подтверждения:
- реализуй строго по спецификации
- добавь / обнови тесты
- соблюдай AGENTS.md
- зафиксируй изменения

### Phase 5 — Report
В конце выдай отчёт:

- Summary
- Changed files
- Tests added / updated
- Commands executed
- How to verify
- Follow-ups (если есть)

---

## ГЛОБАЛЬНЫЕ ПРАВИЛА

- Спецификация — это контракт
- Если есть сомнение → возвращайся к вопросам
- Если спецификация противоречит AGENTS.md → остановись
- Никакой самодеятельности